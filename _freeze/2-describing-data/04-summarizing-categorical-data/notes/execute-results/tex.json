{
  "hash": "8eca3bd5d8fda9c7a0bbd31d3a6a3bd2",
  "result": {
    "markdown": "---\ntitle: \"Summarizing Categorical Data\"\nsubtitle: \"From data frames to tables. From tables to bar charts.\"\ndate: \"08/31/2022\"\nimage: images/taxonomy-of-data.png\nformat:\n  pdf\n---\n\n\n[[Discuss]{.btn .btn-primary}](https://app.perusall.com) [[Reading Questions]{.btn .btn-primary}](https://www.gradescope.com/courses/416233)\n[[PDF]{.btn .btn-primary}](notes.pdf)\n\n<!-- ![](images/claims.png){fig-alt=\"Diagram showing the four types of claims that are made using data: descriptive claim, predictions, generalizations, and causal claims.\" width=\"400px\" fig-align=center} -->\n\n\\\n\n:::{style=\"text-align: center\"}\n## Welcome to Unit I: Describing Data\n:::\n\nIn spring of 2022, the New York Times ran the following story[^nyt].\n\n![](images/nyt-inflation.png){#fig-inflation fig-align=center width=\"600px\"}\n\n\"Consumer Prices\" refers to the Consumer Price Index[^cpi], a weighted average of the prices of thousands of everyday consumer goods: sports equipment, soft drinks, sneakers, internet service, etc. An increase in that index is thought to correspond to rising inflation.\n\nLook carefully at the line plot. Which of the following four claims does it support?\n\n1. The CPI rose 8.3% in April.\n2. The CPI will likely rise throughout the summer.\n3. The global consumer price index rose in April.\n4. The CPI rose 8.3% because of the war in Ukraine.\n\nIn truth, this plot could be consistent with all these claims. They are, in turn, a descriptive claim, a prediction, a generalization, and a causal claim. This newspaper headline falls squarely in the first category, a **descriptive claim**, which seeks only to describe the data set that is on hand.\n\nAlthough 8.3% seems like a simple enough number, is it actually *summarizing* a vast data set of thousands of prices. The process of describing a data set invariably involves summarizing it, either with **numerical summaries** like 8.3% or with **graphical summaries** like the line plot show above. \n\nIn this unit, we will learn to critique and construct descriptive claims made with data. Although they sound elementary, descriptive claims are the most common form of claim made using data. They have the power to move, if not mountains, at least markets.\n\n![Four types of claims made with data covered in this class.](images/claims-only.png){#fig-claims width=\"500px\"}\n\n[^cpi]: To learn more, check out the Wikipedia page on the [CPI in the US](https://en.wikipedia.org/wiki/United_States_Consumer_Price_Index) and the exhaustive description of how the data is collected at the [US Bureau of Labor Statistics](https://www.bls.gov/cpi/overview.htm#:~:text=The%20CPI%20represents%20changes%20in,life%20insurance)\n\n[^nyt]: Smialek, Jeanna (2022, May 11). Consumer Prices are Still Climbing Rapidly. *The New York Times*. <https://www.nytimes.com/2022/05/11/business/economy/april-2022-cpi.html>\n\n\n## Summarizing Categorical Data\n\n[T]{.dropcap}he tools for calculating numerical summaries and graphical summaries can be cleanly divided between tools developed for categorical data and tools for numerical data. We'll discuss each in turn, starting with categorical data.\n\nWhen Dr. Gorman collected data near Palmer Station, Antarctica, she recorded a total of eight variables on 344 penguins, presented here in a data frame.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 344 x 8\n   species island    bill_length_mm bill_depth_mm flipper_~1 body_~2 sex    year\n   <fct>   <fct>              <dbl>         <dbl>      <int>   <int> <fct> <int>\n 1 Adelie  Torgersen           39.1          18.7        181    3750 male   2007\n 2 Adelie  Torgersen           39.5          17.4        186    3800 fema~  2007\n 3 Adelie  Torgersen           40.3          18          195    3250 fema~  2007\n 4 Adelie  Torgersen           NA            NA           NA      NA <NA>   2007\n 5 Adelie  Torgersen           36.7          19.3        193    3450 fema~  2007\n 6 Adelie  Torgersen           39.3          20.6        190    3650 male   2007\n 7 Adelie  Torgersen           38.9          17.8        181    3625 fema~  2007\n 8 Adelie  Torgersen           39.2          19.6        195    4675 male   2007\n 9 Adelie  Torgersen           34.1          18.1        193    3475 <NA>   2007\n10 Adelie  Torgersen           42            20.2        190    4250 <NA>   2007\n# ... with 334 more rows, and abbreviated variable names 1: flipper_length_mm,\n#   2: body_mass_g\n```\n:::\n:::\n\n\nThe first two of these you'll recognize as *nominal categorical* variables. The `species` of each penguin can take one of three levels: Adelie, Chinstrap, or Gentoo; and the `island` on which they were found can also take three levels: Biscoe, Dream, or Torgersen.\n\nIf I asked you to look at this data frame and describe what these two variables show, that's a surprisingly difficult task! The raw data frame has simply too much information to process at a glance. To make it easier, we need to consolidate all of that information into a few numerical summaries. Since these variables don't take numbers as values, we can't take an average or a median. What we can do, though, is simply count up the number of penguins that appeared in every combination of levels and lay them out in a table like this:\n\n<!-- Remake very polished tables using gt -->\n\n::: {.content-visible when-format=\"html\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tabular}[t]{>{}l||r|r|r}\n\\hline\n\\textbf{ } & \\textbf{Biscoe} & \\textbf{Dream} & \\textbf{Torgersen}\\\\\n\\hline\n\\textbf{Adelie} & 44 & 56 & 52\\\\\n\\hline\n\\textbf{Chinstrap} & 0 & 68 & 0\\\\\n\\hline\n\\textbf{Gentoo} & 124 & 0 & 0\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n:::\n\n::: {.content-visible when-format=\"pdf\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tabular}[t]{>{}l||r|r|r}\n\\hline\n\\textbf{ } & \\textbf{Biscoe} & \\textbf{Dream} & \\textbf{Torgersen}\\\\\n\\hline\n\\textbf{Adelie} & 44 & 56 & 52\\\\\n\\hline\n\\textbf{Chinstrap} & 0 & 68 & 0\\\\\n\\hline\n\\textbf{Gentoo} & 124 & 0 & 0\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n:::\n\n\\\n\nAfter a few moments of looking at this table, a few features emerge:\n\n1. The Chinstrap penguins were only found on Dream island.\n2. The penguins found on Torgersen Island were all Adelies.\n3. Adelie penguins were spread fairly evenly across all three islands.\n\nThis method of displaying data is called a contingency table.\n\n**Contingency table**\n:    A table that shows the counts or frequencies of observations that occur in every combination of levels of two categorical variables. Used to display the relationship between variables.\n\nWe can also opt to present these counts in graphical form by constructing a **bar chart**. There are two common methods for laying out counts across two variables in a bar chart.\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![Stacked bar chart](notes_files/figure-pdf/unnamed-chunk-4-1.pdf)\n:::\n\n::: {.cell-output-display}\n![Dodged bar chart](notes_files/figure-pdf/unnamed-chunk-4-2.pdf)\n:::\n:::\n\n\nThe stacked bar chart puts one of the variables along the x-axis (the species) and fills up the y-axis according to the counts in each level of the other variable (the island). The side-by-side bar chart is similar, but unstacks the \"Adelie\" bar to put the three islands besides one another.\n\nSo with two similar to charts to choose from, which one should you pick? The stacked bar chart succeeds in highlighting the total number of Adelie penguins: 152 (also the sum of the top row of the contingency table). The side-by-side version makes that total harder to see, but it is easier to see at a glance the relative sizes of which islands each of those Adelie penguins came from.\n\n![A schematic showing the link between a data frame, a contingency table of counts, and a stacked bar chart for a subset of 16 of the 344 penguins.](images/two-var.png){#fig-two-var fig-alt=\"Sketch showing the flow for two variables from raw data to contingency table to barchart.\" fig-align=center width=\"550px\"}\n\n\n### From Counts to Proportions\n\nWhen you count the number of observations in each level of a categorical variable, you're encoding the overall magnitude of each. But often what is more important is the relative magnitude of each. We can emphasize this by converting counts into proportions.\n\n::: {.content-visible when-format=\"html\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tabular}[t]{>{}l||r|r|r||>{}r}\n\\hline\n\\textbf{} & \\textbf{Biscoe} & \\textbf{Dream} & \\textbf{Torgersen} & \\textbf{}\\\\\n\\hline\n\\textbf{Adelie} & 0.128 & 0.000 & 0.36 & \\textbf{0.488}\\\\\n\\hline\n\\textbf{Chinstrap} & 0.163 & 0.198 & 0.00 & \\textbf{0.361}\\\\\n\\hline\n\\textbf{Gentoo} & 0.151 & 0.000 & 0.00 & \\textbf{0.151}\\\\\n\\hline\n\\textbf{\\textbf{}} & \\textbf{0.442} & \\textbf{0.198} & \\textbf{0.36} & \\textbf{\\textbf{1.000}}\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n:::\n\n::: {.content-visible when-format=\"pdf\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tabular}[t]{>{}l||r|r|r||>{}r}\n\\hline\n\\textbf{} & \\textbf{Biscoe} & \\textbf{Dream} & \\textbf{Torgersen} & \\textbf{}\\\\\n\\hline\n\\textbf{Adelie} & 0.128 & 0.000 & 0.36 & \\textbf{0.488}\\\\\n\\hline\n\\textbf{Chinstrap} & 0.163 & 0.198 & 0.00 & \\textbf{0.361}\\\\\n\\hline\n\\textbf{Gentoo} & 0.151 & 0.000 & 0.00 & \\textbf{0.151}\\\\\n\\hline\n\\textbf{\\textbf{}} & \\textbf{0.442} & \\textbf{0.198} & \\textbf{0.36} & \\textbf{\\textbf{1.000}}\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n:::\n\n### One variable\n\n- one way table\n- counts\n- proportion\n\n- barchart\n- normalized barchart\n\n![](images/one-var.jpg){fig-alt=\"Sketch showing the flow for one variable from raw data to contingency table to barchart.\" fig-align=center}\n\n- two way table\n- counts\n- proportions three ways\n \n - dodged barchart\n - stacked barchart -> normalized\n - def of association\n \n\n \n \n\n<!-- {{< include ../../assets/_links-to-materials.qmd >}} -->\n\n\n",
    "supporting": [
      "notes_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "\\usepackage{booktabs}\n\\usepackage{longtable}\n\\usepackage{array}\n\\usepackage{multirow}\n\\usepackage{wrapfig}\n\\usepackage{float}\n\\usepackage{colortbl}\n\\usepackage{pdflscape}\n\\usepackage{tabu}\n\\usepackage{threeparttable}\n\\usepackage{threeparttablex}\n\\usepackage[normalem]{ulem}\n\\usepackage{makecell}\n\\usepackage{xcolor}\n"
      ]
    },
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}